<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UTME CBT — ACME SCIENCE TUTORIAL</title>
<style>
  :root{--accent:#0b74de;--bg:#f7f9fc;--card:#fff;--muted:#666;--radius:12px;}
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
  body{background:var(--bg);display:flex;align-items:center;justify-content:center;padding:18px;}
  .app{width:100%;max-width:920px;min-height:560px;box-shadow:0 8px 30px rgba(8,20,40,.08);border-radius:16px;overflow:hidden;position:relative}
  .watermark{position:absolute;inset:0;pointer-events:none;opacity:0.06;background-repeat:no-repeat;background-position:center;background-size:45%;filter:grayscale(1) saturate(0);}
  header{display:flex;align-items:center;gap:12px;padding:14px 18px;background:rgba(255,255,255,0.8);backdrop-filter:blur(4px);}
  .logo-small{width:44px;height:44px;border-radius:8px;object-fit:contain;}
  .title{font-weight:700;font-size:16px}
  .subtitle{font-size:13px;color:var(--muted);margin-top:2px}
  .page{padding:26px;display:none;min-height:420px;box-sizing:border-box;}
  .visible{display:block}
  .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:0 6px 20px rgba(10,20,40,.04);}
  .center{display:flex;flex-direction:column;align-items:center;gap:14px;text-align:center;}
  input, .btn, select{width:100%;padding:12px;border-radius:8px;border:1px solid #e6eef8;font-size:15px}
  .btn{background:var(--accent);color:#fff;border:none;cursor:pointer;font-weight:600}
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .small{font-size:13px;color:var(--muted)}
  .topright{position:absolute;right:14px;top:10px;font-size:13px;color:var(--muted)}
  .meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .timer{font-weight:700;font-size:16px;padding:8px 12px;border-radius:10px;background:#fff;box-shadow:0 4px 14px rgba(7,10,20,.04)}
  .question{margin-bottom:18px;padding:14px;border-radius:10px;border:1px solid #f0f4f9;background:#fff}
  .qtitle{font-weight:700;margin-bottom:8px}
  .options{display:flex;flex-direction:column;gap:8px}
  .option{display:flex;gap:12px;align-items:center;padding:10px;border-radius:9px;border:1px solid transparent}
  .option input{accent-color:var(--accent)}
  .nav{display:flex;justify-content:space-between;gap:12px;margin-top:16px}
  .progress{font-size:13px;color:var(--muted)}
  .correct{background:#e8f6ea;border-color:#bfe6c6}
  .wrong{background:#fff6f6;border-color:#f1c7c7}
  .show-correct{font-weight:700;color:#137a13;margin-left:auto}
  .answer-key{margin-top:12px;padding:12px;border-radius:10px;background:#fbfbfb;border:1px dashed #eee;color:#333}
</style>
</head>
<body>
<div class="app">
  <div class="watermark" id="watermark"></div>
  <header>
    <img id="topLogo" class="logo-small" src="" alt="logo"/>
    <div>
      <div class="title">UTME CBT — ACME SCIENCE TUTORIAL</div>
      <div class="subtitle" id="subjectLine"></div>
    </div>
    <div class="topright" id="topRightInfo"></div>
  </header>

  <!-- PASSWORD PAGE -->
  <main class="page visible" id="passwordPage">
    <div class="card center" style="max-width:520px;margin:22px auto;">
      <h2>Enter Access Password</h2>
      <input id="passwordInput" type="password" placeholder="Enter password"/>
      <button id="passwordBtn" class="btn">Unlock</button>
    </div>
  </main>

  <!-- START PAGE -->
  <main class="page" id="startPage">
    <div class="card center" style="max-width:720px;margin:20px auto;">
      <h2>Ready to start?</h2>
      <div style="width:100%;max-width:420px">
        <input id="nameInput" type="text" placeholder="Candidate name (optional)" style="margin-bottom:8px"/>
        <select id="subjectSelect">
          <option value="physics">Physics</option>
          <option value="chemistry">Chemistry</option>
          <option value="biology">Biology</option>
          <option value="mathematics">Mathematics</option>
          <option value="english">English</option>
        </select>
        <!-- Subsection dropdown, hidden initially -->
        <select id="subsectionSelect" style="display:none; margin-top:10px;">
        </select>
        <button id="startBtn" class="btn" style="margin-top:12px">Start Quiz</button>
      </div>
    </div>
  </main>

  <!-- QUIZ PAGE -->
  <main class="page" id="quizPage">
    <div class="card" style="margin:18px">
      <div class="meta">
        <div>
          <div style="font-size:14px">Candidate: <span id="candidateName">—</span></div>
          <div class="progress" id="progressIndicator">Question 1</div>
        </div>
        <div style="display:flex;gap:12px;align-items:center">
          <div class="timer" id="timer">00:00</div>
          <button id="submitBtn" class="btn">Submit</button>
        </div>
      </div>
      <div id="questionContainer"></div>
      <div class="nav">
        <button id="prevBtn" class="btn" style="background:#fff;color:#222;border:1px solid #ddd">Previous</button>
        <button id="nextBtn" class="btn">Next</button>
      </div>
      <div id="resultArea" style="margin-top:16px;display:none"></div>
    </div>
  </main>
</div>

<script>
/* ==========================
   ==== CONFIG & QUESTIONS ======
========================== */
const LOGO_URL = "https://raw.githubusercontent.com/Daniel-Empire/ACME-LOGO/0bf35e57e8900de8e0e9dee5c9feb31a34d37030/logo.png"; // replace as needed
const PASSWORD = "acme2025";
const TOTAL_TIME_SECONDS = 5*60;

const questionsData = {
  physics: {
    name: "Physics",
    subsections: {
      "Basic Physics": [
        {q:"What is the speed of light?",choices:["3 x 10^8 m/s","5 x 10^6 m/s","1 x 10^3 m/s","9.8 m/s^2"],correct:0},
        {q:"What is Newton's second law?",choices:["F=ma","E=mc^2","V=IR","P=IV"],correct:0}
      ],
      "Mechanics": [
        {q:"What force keeps planets in orbit?",choices:["Magnetic","Gravity","Friction","Electromagnetic"],correct:1}
      ]
    }
  },
  chemistry: {
    name: "Chemistry",
    subsections: {
      "Organic Chemistry": [
        {q:"What is the chemical formula for ethanol?",choices:["C2H5OH","CH4","H2O","NaCl"],correct:0},
        {q:"What is the main component of natural gas?",choices:["Methane","Ethane","Propane","Butane"],correct:0}
      ],
      "Inorganic Chemistry": [
        {q:"What is the chemical symbol for sodium?",choices:["Na","So","S","Sn"],correct:0}
      ]
    }
  },
  biology: {
    name: "Biology",
    subsections: {
      "Human Anatomy": [
        {q:"Which organ pumps blood?",choices:["Lungs","Liver","Heart","Kidneys"],correct:2}
      ],
      "Genetics": [
        {q:"DNA stands for?",choices:["Deoxyribonucleic acid","Deoxyribose nucleic acid","Dicarboxylic acid","None"],correct:0}
      ]
    }
  },
  mathematics: {
    name: "Mathematics",
    subsections: {
      "Algebra": [
        {q:"Solve for x: 2x + 3 = 7",choices:["1","2","3","4"],correct:1}
      ],
      "Geometry": [
        {q:"What is the sum of angles in a triangle?",choices:["180°","90°","360°","270°"],correct:0}
      ]
    }
  },
  english: {
    name: "English",
    subsections: {
      "Spelling": [
        {q:"Choose the correct spelling:",choices:["Recieve","Receive","Recive","Receeve"],correct:1}
      ],
      "Vocabulary": [
        {q:"Antonym of 'Happy'?",choices:["Sad","Joyful","Glad","Cheerful"],correct:0}
      ]
    }
  }
};

/* Variables */
let QUESTIONS = [];
let answers = [];
let submitted = false;
let currentIndex = 0;
let remaining = TOTAL_TIME_SECONDS;
let timerInt = null;

/* Elements */
const byId = id => document.getElementById(id);

/* Initialize branding and logo */
function initBranding() {
  byId("topLogo").src = LOGO_URL;
  byId("watermark").style.backgroundImage = `url("${LOGO_URL}")`;
}
initBranding();

/* Show page function */
function showPage(p) {
  ["passwordPage", "startPage", "quizPage"].forEach(x => byId(x).classList.remove("visible"));
  byId(p).classList.add("visible");
}

/* Populate subsections based on subject */
const subsectionSelect = byId("subsectionSelect");
const subjectSelect = byId("subjectSelect");
const subjectData = questionsData;

subjectSelect.onchange = () => {
  const subjKey = subjectSelect.value;
  const subsections = Object.keys(subjectData[subjKey].subsections);
  // Populate subsections
  subsectionSelect.innerHTML = "";
  if (subsections.length > 0) {
    subsectionSelect.style.display = "block";
    subsections.forEach(sub => {
      const opt = document.createElement("option");
      opt.value = sub;
      opt.textContent = sub;
      subsectionSelect.appendChild(opt);
    });
  } else {
    subsectionSelect.style.display = "none";
  }
};

/* Password unlock */
byId("passwordBtn").onclick = () => {
  if (byId("passwordInput").value === PASSWORD) {
    showPage("startPage");
  } else {
    alert("Wrong password");
  }
};

/* Start quiz */
byId("startBtn").onclick = () => {
  const subjKey = subjectSelect.value;
  const subsection = subsectionSelect.style.display === "block" ? subsectionSelect.value : null;

  if (subsection && subjectData[subjKey].subsections[subsection]) {
    QUESTIONS = subjectData[subjKey].subsections[subsection];
    // Set subject name in header
    byId("subjectLine").textContent = subjectData[subjKey].name + " - " + subsection;
  } else {
    QUESTIONS = [];
  }

  answers = new Array(QUESTIONS.length).fill(null);
  byId("candidateName").textContent = byId("nameInput").value || "—";
  showPage("quizPage");
  startQuiz();
};

/* Render question */
function renderQ(i) {
  const Q = QUESTIONS[i];
  const qc = byId("questionContainer");
  qc.innerHTML = "";
  const box = document.createElement("div");
  box.className = "question";
  box.innerHTML = `<div class="qtitle">${Q.q}</div>`;
  const opts = document.createElement("div");
  opts.className = "options";
  Q.choices.forEach((c, idx) => {
    const o = document.createElement("label");
    o.className = "option";
    const r = document.createElement("input");
    r.type = "radio";
    r.name = "q" + i;
    r.value = idx;
    if (answers[i] === idx) r.checked = true;
    r.onchange = () => answers[i] = idx;
    const s = document.createElement("span");
    s.textContent = c;
    o.appendChild(r);
    o.appendChild(s);
    opts.appendChild(o);
  });
  box.appendChild(opts);
  qc.appendChild(box);
  if (submitted) markQ(box, i);
  updateProg();
}

/* Mark question answers after submission */
function markQ(box, i) {
  const ci = QUESTIONS[i].correct;
  box.querySelectorAll(".option").forEach((o, idx) => {
    o.classList.remove("correct", "wrong");
    o.querySelector("input").disabled = true;
    if (idx === ci) {
      o.classList.add("correct");
      if (!o.querySelector(".show-correct")) {
        const b = document.createElement("span");
        b.className = "show-correct";
        b.textContent = "Correct";
        o.appendChild(b);
      }
    } else if (answers[i] === idx) {
      o.classList.add("wrong");
      if (!box.querySelector(".answer-key")) {
        const ak = document.createElement("div");
        ak.className = "answer-key";
        ak.textContent = "Correct: " + QUESTIONS[i].choices[ci];
        box.appendChild(ak);
      }
    }
  });
}

/* Update progress indicator */
function updateProg() {
  byId("progressIndicator").textContent = `Question ${currentIndex + 1} of ${QUESTIONS.length}`;
}

/* Navigation buttons */
byId("nextBtn").onclick = () => {
  if (currentIndex < QUESTIONS.length - 1) {
    currentIndex++;
    renderQ(currentIndex);
  } else alert("Last question");
};
byId("prevBtn").onclick = () => {
  if (currentIndex > 0) {
    currentIndex--;
    renderQ(currentIndex);
  } else alert("First question");
};

/* Timer functions */
function startTimer() {
  remaining = TOTAL_TIME_SECONDS;
  byId("timer").textContent = formatTime(remaining);
  if (timerInt) clearInterval(timerInt);
  timerInt = setInterval(() => {
    remaining--;
    byId("timer").textContent = formatTime(remaining);
    if (remaining <= 0) {
      clearInterval(timerInt);
      if (!submitted) submit();
    }
  }, 1000);
}
function formatTime(s) {
  return String(Math.floor(s / 60)).padStart(2, "0") + ":" + String(s % 60).padStart(2, "0");
}

/* Start quiz */
function startQuiz() {
  submitted = false;
  currentIndex = 0;
  renderQ(0);
  updateProg();
  if (timerInt) clearInterval(timerInt);
  startTimer();
}

/* Submit quiz */
byId("submitBtn").onclick = () => {
  if (confirm("Submit quiz?")) submit();
};
function submit() {
  submitted = true;
  if (timerInt) clearInterval(timerInt);
  let score = 0;
  QUESTIONS.forEach((q, i) => {
    if (answers[i] === q.correct) score++;
  });
  byId("resultArea").style.display = "block";
  byId("resultArea").innerHTML = `<div><b>Result:</b> ${score}/${QUESTIONS.length} (${Math.round(score / QUESTIONS.length * 100)}%)</div>`;
  renderQ(currentIndex);
}

/* Keyboard navigation */
document.addEventListener("keydown", e => {
  if (!byId("quizPage").classList.contains("visible")) return;
  if (e.key === "ArrowRight") byId("nextBtn").click();
  if (e.key === "ArrowLeft") byId("prevBtn").click();
});
</script>
</body>
</html>
